name: Run OpenAI API Demo

on:
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘
  schedule:
    - cron: '0 0 * * *'  # å¯é€‰ï¼šå®šæ—¶è§¦å‘ï¼ˆæ¯å¤© UTC 0 ç‚¹ï¼‰

jobs:
  run-openai-demo:
    runs-on: ubuntu-latest  # ä½¿ç”¨ GitHub æä¾›çš„ Ubuntu ç¯å¢ƒ

    steps:
      - name: Checkout code
        uses: actions/checkout@v4  # æ‹‰å–ä»“åº“ä»£ç 

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'  # æŒ‡å®š Python ç‰ˆæœ¬

      - name: Install dependencies
        run: |
          pip install openai  # å®‰è£… OpenAI åº“

      - name: Run Python script
        env:
          HUNYUAN_API_KEY: ${{ secrets.HUNYUAN_API_KEY }}  # ä» Secrets è¯»å– API å¯†é’¥
        run: |
          python -c "
  import openai
  import os
  
  client = OpenAI(
  api_key=os.getenv('HUNYUAN_API_KEY'), # æ··å…ƒ APIKey
  base_url="https://api.hunyuan.cloud.tencent.com/v1", # æ··å…ƒ endpoint
  )
  completion = client.chat.completions.create(
  model="hunyuan-turbo",
  messages=[
  {
    "role": "user",
    "content": """è¯·å¸®æˆ‘æŠŠä»¥ä¸‹ä¸­æ–‡æ–‡æ¡£ç¿»è¯‘æˆè‹±æ–‡,å¹¶ä»¥markdownæ ¼å¼è¾“å‡º:
## ğŸŒˆ 0.1.8 `2024-12-30` 
### ğŸš€ Features
- `TDUpload`: æ–°å¢Uploadç»„ä»¶ @TingShine ([#405](https://github.com/Tencent/tdesign-flutter/pull/405))
- `SearchBar`: å¢åŠ é”®ç›˜åŠ¨ä½œç±»å‹ @ccXxx1aoBai ([#366](https://github.com/Tencent/tdesign-flutter/pull/366))""",
  },
],
  )
  print(completion.choices[0].message.content)
  "